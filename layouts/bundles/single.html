{{ define "main" }}
{{ $bundleId := .Params.bundle_id }}
{{ $bundle := index (where .Site.Data.bundles "id" $bundleId) 0 }}

{{ if $bundle }}
<!-- Hero Section -->
<header class="hero hero-bundle-detail">
    <div class="bundle-hero-content">
        <a href="/bundles/" class="back-link">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m15 18-6-6 6-6"/>
            </svg>
            All Learning Paths
        </a>
        <h1 class="hero-title">{{ $bundle.name }}</h1>
        <p class="hero-tagline">{{ $bundle.description }}</p>
        <div class="bundle-hero-meta">
            <span class="bundle-badge bundle-badge-{{ lower $bundle.difficulty }}">{{ $bundle.difficulty }}</span>
            <span class="bundle-badge bundle-badge-time">{{ $bundle.time_estimate }}</span>
            <span class="bundle-badge bundle-badge-category">{{ $bundle.category }}</span>
            <span class="bundle-badge bundle-badge-items">{{ len $bundle.items }} items</span>
        </div>
    </div>
</header>

<div class="container">
    <div class="bundle-detail-content">
        <!-- Progress indicator (optional) -->
        <div class="bundle-progress-header">
            <h2>Learning Path</h2>
            <p class="bundle-instruction">Work through these resources in order for the best learning experience.</p>
        </div>

        <!-- Items List -->
        <ol class="bundle-items-list">
            {{ range $index, $item := $bundle.items }}
            <li class="bundle-item">
                <div class="bundle-item-number">{{ add $index 1 }}</div>
                <div class="bundle-item-content">
                    <div class="bundle-item-header">
                        <span class="bundle-item-type bundle-item-type-{{ lower $item.type }}">{{ $item.type }}</span>
                        <h3 class="bundle-item-name">
                            <a href="{{ $item.url }}" target="_blank" rel="noopener">
                                {{ $item.name }}
                                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                                    <polyline points="15 3 21 3 21 9"/>
                                    <line x1="10" y1="14" x2="21" y2="3"/>
                                </svg>
                            </a>
                        </h3>
                    </div>
                    <p class="bundle-item-why">
                        <strong>Why included:</strong> {{ $item.why }}
                    </p>
                </div>
            </li>
            {{ end }}
        </ol>

        <!-- Next Steps -->
        <div class="bundle-next-steps">
            <h2>What's Next?</h2>
            <p>Completed this path? Here are some suggestions:</p>
            <div class="next-steps-links">
                <a href="/bundles/" class="btn-secondary">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                    Browse More Paths
                </a>
                <a href="/packages/" class="btn-secondary">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m7.5 4.27 9 5.15"/>
                        <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
                        <path d="m3.3 7 8.7 5 8.7-5"/>
                        <path d="M12 22V12"/>
                    </svg>
                    Explore Packages
                </a>
                <a href="/papers/" class="btn-secondary">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                    Read Papers
                </a>
            </div>
        </div>
    </div>
</div>

{{ else }}
<div class="container">
    <div class="error-message">
        <h1>Bundle Not Found</h1>
        <p>The requested learning path could not be found.</p>
        <a href="/bundles/" class="btn-primary">Browse All Paths</a>
    </div>
</div>
{{ end }}
{{ end }}
